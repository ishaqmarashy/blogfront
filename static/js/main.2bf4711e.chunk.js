(this.webpackJsonpblogfront=this.webpackJsonpblogfront||[]).push([[0],{17:function(e,t,n){},18:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),r=n(12),c=n.n(r),i=(n(17),n(2)),o=n(4),l=n(3),u=(n(18),n(9)),j=n.n(u),d=n(0),b=function(e){var t=e.setUser,n=e.SignInURL,a=e.SignUpURL,r=e.setUserName,c=Object(s.useState)(!0),u=Object(l.a)(c,2),b=u[0],p=u[1],m=Object(s.useState)(""),h=Object(l.a)(m,2),O=h[0],x=h[1],f=function(){var e=Object(o.a)(Object(i.a)().mark((function e(s){var a,c,o,l,u,d,b;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),a=s.target,c=a.username,o=a.password,!c||!o){e.next=13;break}return x("Attempting log-in..."),l=j()(o.value),u=JSON.stringify({username:c.value,password:l}),e.next=8,fetch(n,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:u});case 8:return d=e.sent,e.next=11,d.json();case 11:(b=e.sent)&&b.token?(window.localStorage.setItem("user",JSON.stringify({user:b.token,username:c.value})),x(""),r(c.value),t(b.token)):(x("Invalid credentials..."),setTimeout((function(){return x("")}),3e3));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t){var n,s,r,c,o,l,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=t.target,s=n.username,r=n.password,c=n.confirm_password,!s||!r||c.value!==r.value){e.next=18;break}return e.prev=3,o=j()(r.value),l=JSON.stringify({username:s.value,password:o}),e.next=8,fetch(a,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:l});case 8:u=e.sent,200!==u.status?(x("Username is taken!"),setTimeout((function(){return x("")}),3e3)):(x("Sign-up sucessful!"),setTimeout((function(){return x("")}),3e3)),e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(3),e.t0;case 16:e.next=20;break;case 18:x("Please Fill all fields and make sure password and password confirmation match..."),setTimeout((function(){return x("")}),3e3);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),g=Object(d.jsxs)("form",{className:"sign-in",onSubmit:f,children:[Object(d.jsx)("label",{htmlFor:"username",children:"Username:\xa0"}),Object(d.jsx)("input",{id:"username",name:"username",type:"text"}),Object(d.jsx)("label",{htmlFor:"password",children:"Password:\xa0"}),Object(d.jsx)("input",{id:"password",name:"password",type:"password"}),Object(d.jsx)("button",{type:"submit",children:"Sign-In"}),Object(d.jsx)("div",{className:"error",children:O})]}),w=Object(d.jsxs)("form",{className:"sign-in",onSubmit:v,children:[Object(d.jsx)("label",{htmlFor:"username",children:"Username:\xa0"}),Object(d.jsx)("input",{id:"username",name:"username",type:"text"}),Object(d.jsx)("label",{htmlFor:"password",children:"Password:\xa0"}),Object(d.jsx)("input",{id:"password",name:"password",type:"password"}),Object(d.jsx)("label",{htmlFor:"confirm_password",children:"Confirm Password:\xa0"}),Object(d.jsx)("input",{id:"confirm_password",name:"confirm_password",type:"password"}),Object(d.jsx)("button",{type:"submit",children:"Sign-Up"}),Object(d.jsx)("div",{className:"error",children:O})]});return Object(d.jsxs)("div",{className:"nav",children:[Object(d.jsx)("img",{className:"logo",src:"/blogfront/android-chrome-512x512.png",alt:"logo"}),Object(d.jsx)("div",{className:"nav-sign",children:b?g:w}),Object(d.jsx)("div",{className:"nav-out",children:Object(d.jsx)("button",{className:"sign-out",onClick:function(e){e.preventDefault(),x(""),p(!b)},children:b?Object(d.jsx)(d.Fragment,{children:"Sign Up"}):Object(d.jsx)(d.Fragment,{children:"Sign In"})})})]})};var p=function(e){var t=e.userName,n=e.handleSignout;return Object(d.jsxs)("div",{className:"nav",children:[Object(d.jsx)("img",{className:"logo",src:"/blogfront/android-chrome-512x512.png",alt:"logo"}),Object(d.jsx)("div",{className:"nav-sign",children:Object(d.jsxs)("div",{className:"sign-in",children:["Welcome ",t,"!"]})}),Object(d.jsx)("div",{className:"nav-out",children:Object(d.jsx)("button",{className:"sign-out",onClick:n,children:"Sign out"})})]})},m=n(7);var h=function(e){var t=e.selectedPost,n=e.user,a=e.commentsURL,r=e.handleBack,c=Object(s.useState)([]),u=Object(l.a)(c,2),j=u[0],b=u[1],p=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t){var s,r,c,o,l,u,d;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s=t.target,r=s.postid,c=s.text,r.value&&c.value){e.next=4;break}return e.abrupt("return");case 4:return o={userid:n,postid:r.value,text:c.value,date:new Date},e.next=7,fetch("".concat(a,"/").concat(r.value,"/comment"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify(o)});case 7:return l=e.sent,u=l,e.next=11,l.json();case 11:d=e.sent,200===u.status&&b([d].concat(Object(m.a)(j)));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=Object(d.jsxs)("form",{className:"comment-form post",onSubmit:p,children:[Object(d.jsxs)("header",{className:"post-header",children:[" ",Object(d.jsxs)("label",{htmlFor:"postid",children:["Post ID:  \xa0",Object(d.jsx)("input",{readOnly:!0,type:"text",name:"postid",id:"postid",value:t._id})]}),Object(d.jsxs)("label",{htmlFor:"userid",children:["User: \xa0",Object(d.jsx)("input",{readOnly:!0,type:"text",name:"userid",id:"userid",value:t.userid})]}),Object(d.jsxs)("label",{htmlFor:"title",children:["Title: \xa0",Object(d.jsx)("input",{readOnly:!0,type:"text",name:"title",id:"title",value:t.title})]}),Object(d.jsxs)("label",{htmlFor:"date",children:["Date: \xa0",Object(d.jsx)("input",{readOnly:!0,type:"text",name:"date",id:"title",value:t.date})]})]}),Object(d.jsx)("textarea",{className:"post-body",placeholder:"Describe text here",name:"text",id:"text"}),Object(d.jsx)("button",{id:"comment-button",type:"submit",children:"Add Comment"})]}),O=j?j.map((function(e){return Object(d.jsxs)("div",{className:"post",children:[Object(d.jsxs)("header",{className:"post-header",children:[Object(d.jsxs)("h3",{children:["Created By: ",e.userid]}),Object(d.jsxs)("div",{children:["Date: ",e.date]})]}),Object(d.jsx)("div",{className:"post-body",children:e.text})]},e._id)})):null;return Object(s.useEffect)((function(){var e=function(){var e=Object(o.a)(Object(i.a)().mark((function e(){var s,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(a,"/").concat(t._id,"/comment"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}});case 2:return s=e.sent,e.next=5,s.json();case 5:r=e.sent,b(r.reverse());case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t,n,a]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"posts-wrapper-header",children:[Object(d.jsxs)("h1",{className:"post-title",children:[" ",Object(d.jsx)(d.Fragment,{children:"Post a Comment"})," "]}),Object(d.jsx)("button",{className:"new-post",onClick:r,children:"Back"})]}),h,O]})},O=function(e){var t=e.user,n=e.postsURL,a=Object(s.useState)([]),r=Object(l.a)(a,2),c=r[0],u=r[1],j=Object(s.useState)(""),b=Object(l.a)(j,2),p=b[0],O=b[1],x=Object(s.useState)(!0),f=Object(l.a)(x,2),v=f[0],g=f[1],w=Object(s.useState)(!0),y=Object(l.a)(w,2),N=y[0],S=y[1],k=function(){var e=Object(o.a)(Object(i.a)().mark((function e(s){var a,r,o,l,j,d,b;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),a=s.target,r=a.title,o=a.text,r.value&&o.value){e.next=4;break}return e.abrupt("return");case 4:return l={title:r.value,text:o.value},e.next=7,fetch(n,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify(l)});case 7:return j=e.sent,d=j,e.next=11,j.json();case 11:b=e.sent,200===d.status&&u([b].concat(Object(m.a)(c)));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=c?c.map((function(e,t){return Object(d.jsxs)("div",{onClick:function(){return function(e){O(e),g(!1)}(e)},className:"post",children:[Object(d.jsxs)("header",{className:"post-header",children:[Object(d.jsxs)("div",{className:"author",children:["By: ",e.userid]}),"    ",Object(d.jsxs)("h3",{children:["Title: ",e.title]}),"     ",Object(d.jsxs)("div",{children:["Date: ",e.date]})]}),Object(d.jsxs)("div",{className:"post-body",children:[" ",e.text]})]},e._id)})):null,U=Object(d.jsxs)("form",{className:"post",onSubmit:k,children:[Object(d.jsx)("header",{className:"create-post-header",children:Object(d.jsx)("div",{children:Object(d.jsxs)("h3",{htmlFor:"title",children:["Title:",Object(d.jsx)("input",{type:"text",className:"title",placeholder:"Title text here",name:"title"})]})})}),Object(d.jsx)("textarea",{className:"post-body",placeholder:"Describe text here",name:"text"}),Object(d.jsx)("button",{id:"post-button",type:"submit",children:"Create Post"})]});return Object(s.useEffect)((function(){var e=function(){var e=Object(o.a)(Object(i.a)().mark((function e(){var s,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}});case 3:return s=e.sent,e.next=6,s.json();case 6:a=e.sent,u(a.reverse()),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[t,n]),Object(d.jsx)(d.Fragment,{children:v?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"posts-wrapper-header",children:[Object(d.jsxs)("h1",{className:"post-title",children:[" ",N?Object(d.jsx)(d.Fragment,{children:"Create a post"}):Object(d.jsx)(d.Fragment,{children:"Latest Post"})," "]}),Object(d.jsx)("button",{onClick:function(){S(!N)},className:"new-post",children:N?Object(d.jsx)(d.Fragment,{children:"Back"}):Object(d.jsx)(d.Fragment,{children:"New Post"})})]}),N&&U,F]}):Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(h,{selectedPost:p,handleBack:function(e){e.preventDefault(),O(""),g(!0)},user:t,commentsURL:"".concat(n)})})})},x="https://unusual-handbag-fly.cyclic.cloud";var f=function(){var e=Object(s.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(s.useState)(""),c=Object(l.a)(r,2),u=c[0],j=c[1],m=function(){var e=Object(o.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.clear(),a("");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("user"));e&&e.user&&e.username&&(a(e.user),j(e.username))}),[n]),Object(d.jsxs)("div",{className:"App",children:[n?Object(d.jsx)(p,{userName:u,handleSignout:m}):Object(d.jsx)(b,{setUser:a,setUserName:j,SignInURL:x,SignUpURL:"".concat(x,"/sign-up")}),Object(d.jsx)("header",{className:"App-header",children:n&&Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"posts-wrapper",children:Object(d.jsx)(O,{user:n,postsURL:"".concat(x,"/post")})})})})]})};n(22).config(),c.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(f,{})}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.2bf4711e.chunk.js.map